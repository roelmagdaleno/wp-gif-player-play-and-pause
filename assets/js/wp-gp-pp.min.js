const pauseObserver=new IntersectionObserver(WP_GP_PP_maybePauseGIF,{rootMargin:"100px 0px 100px 0px",threshold:.7}),WP_GP_PP_OVERLAY_SELECTOR=".wp-gp-pp-overlay";function WP_GP_PP_maybePauseGIF(e,t){for(let t=0;t<e.length;t++){const n=e[t];if(!n.isIntersecting)continue;const a=n.target;if(!a.dataset.playing)continue;const s=a.querySelector(".wp-gp-pp-overlay");s&&s.click()}}function WP_GP_PP_initGIFCanvas(){const e=document.querySelectorAll(".wp-gp-pp-gif-canvas-player");for(let t=0;t<e.length;t++){const n=e[t],a=n.parentElement,s=a.querySelector(".wp-gp-pp-overlay"),l=a.dataset,i=new SuperGif({gif:n,c_w:l.width,c_h:l.height,max_width:l.width});i.load(()=>WP_GP_PP_toggleCanvasGIF(s,i))}}function WP_GP_PP_toggleCanvasGIF(e,t){t.get_auto_play()||t.pause();const n=e.parentElement;pauseObserver.observe(n),e.onclick=()=>{const a=e.children[0],s=t.get_playing();s?delete n.dataset.playing:n.dataset.playing="true",s?a.classList.remove("is-playing"):a.classList.add("is-playing"),s?t.pause():t.play()}}function WP_GP_PP_toggleVideosGIF(){const e=document.querySelectorAll(".wp-gp-pp-video-player");for(let t=0;t<e.length;t++){const n=e[t],a=n.parentElement.querySelector(".wp-gp-pp-overlay"),s=n.parentElement;a.onclick=()=>{const e=a.children[0].classList,t=e.contains("is-playing");t?delete s.dataset.playing:s.dataset.playing="true",t?e.remove("is-playing"):e.add("is-playing"),t?n.pause():n.play()},pauseObserver.observe(s)}}function WP_GP_PP_toggleGIF(){const e=document.querySelectorAll(".wp-gp-pp-gif-thumbnail");for(let t=0;t<e.length;t++){const n=e[t],a=n.parentElement,s=a.querySelector(".wp-gp-pp-gif"),l=a.querySelector(".wp-gp-pp-overlay");pauseObserver.observe(a),l.onclick=()=>{const e=l.children[0].classList,t=e.contains("is-playing");t?e.remove("is-playing"):e.add("is-playing");let i=n.getAttribute("src").replace("_gif_thumbnail.jpeg",".gif");WP_GP_PP_realGIFhasSource(s,i)||s.setAttribute("src",i),t?delete a.dataset.playing:a.dataset.playing="true",t?a.classList.remove("is-playing"):a.classList.add("is-playing")}}}function WP_GP_PP_realGIFhasSource(e,t){const n=e.getAttribute("src");if(t===n)return!0;if(""===n)return!1;const a=e.dataset;return(!a.hasOwnProperty("src")||""!==a.src)&&!(n.includes("data")||n.includes("base64")||n.includes("lazy"))}function WP_GP_PP_INIT(){const e=WP_GIF_PLAYER.gifPlayersInPost;(e.includes("gif")||document.querySelector(".wp-gp-pp-gif"))&&WP_GP_PP_toggleGIF(),(e.includes("canvas")||document.querySelector(".wp-gp-pp-gif-canvas-player"))&&WP_GP_PP_initGIFCanvas(),(e.includes("video")||document.querySelector(".wp-gp-pp-video-player"))&&WP_GP_PP_toggleVideosGIF()}document.addEventListener("DOMContentLoaded",WP_GP_PP_INIT);